/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Gradle plugin project to get you started.
 * For more details take a look at the Writing Custom Plugins chapter in the Gradle
 * User Manual available at https://docs.gradle.org/6.0.1/userguide/custom_plugins.html
 */

plugins {
    // Apply the Java Gradle plugin development plugin to add support for developing Gradle plugins
    id 'java-gradle-plugin'
    id 'maven-publish'
    id 'uk.gov.hmcts.java' version '0.12.43'
}

group 'com.github.hmcts.rse-cft-lib'
version System.getenv('RELEASE_VERSION') ?: 'DEV-SNAPSHOT'

repositories {
  mavenCentral()
  mavenLocal()
}

dependencies {
    implementation platform('com.azure:azure-sdk-bom:1.2.36')
    implementation group: 'com.azure', name: 'azure-security-keyvault-secrets'
    implementation group: 'com.azure', name: 'azure-identity'

    annotationProcessor group: 'org.projectlombok', name: 'lombok', version: '1.18.38'
    compileOnly group: 'org.projectlombok', name: 'lombok', version: '1.18.38'
    implementation 'com.google.guava:guava:33.4.8-jre'
    implementation "com.github.hmcts.rse-cft-lib:ccd-gradle-plugin:${version}"

    testImplementation group: 'junit', name: 'junit', version: '4.13.2'
    testImplementation group: 'commons-io', name: 'commons-io', version: '2.19.0'
    testImplementation group: 'org.hamcrest', name: 'hamcrest-all', version: '1.3'
    testImplementation group: 'org.assertj', name: 'assertj-core', version: '3.27.3'
}

gradlePlugin {
    plugins {
        greeting {
            id = 'com.github.hmcts.rse-cft-lib'
            displayName = 'HMCTS CFT development SDK'
            description = 'SDK for local development and testing'
            implementationClass = 'uk.gov.hmcts.rse.CftLibPlugin'
        }
    }
}

publishing {
    repositories {
        maven {
            name = "AzureArtifacts"
            url = uri("https://pkgs.dev.azure.com/hmcts/Artifacts/_packaging/hmcts-lib/maven/v1")
            credentials {
                username = System.getenv("AZURE_DEVOPS_ARTIFACT_USERNAME")
                password = System.getenv("AZURE_DEVOPS_ARTIFACT_TOKEN")
            }
        }
    }
}

compileJava {
    options.compilerArgs += ["-Werror"]
}
