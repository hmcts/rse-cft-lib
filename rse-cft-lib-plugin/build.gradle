/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Gradle plugin project to get you started.
 * For more details take a look at the Writing Custom Plugins chapter in the Gradle
 * User Manual available at https://docs.gradle.org/6.0.1/userguide/custom_plugins.html
 */

plugins {
    // Apply the Java Gradle plugin development plugin to add support for developing Gradle plugins
    id 'java-gradle-plugin'
    id 'maven-publish'
    id 'com.gradle.plugin-publish' version '0.20.0'
}

group 'com.github.hmcts.rse-cft-lib'

repositories {
  mavenCentral()
  maven { url 'https://jitpack.io' }
  mavenLocal()
}

dependencies {
    // Use JUnit test framework for unit tests
    annotationProcessor group: 'org.projectlombok', name: 'lombok', version: '1.18.22'
    compileOnly group: 'org.projectlombok', name: 'lombok', version: '1.18.20'
    implementation 'com.google.guava:guava:31.0.1-jre'

    testImplementation 'junit:junit:4.13.2'
    testImplementation group: 'commons-io', name: 'commons-io', version: '2.11.0'
    testImplementation group: 'org.hamcrest', name: 'hamcrest-all', version: '1.3'
    testImplementation group: 'org.assertj', name: 'assertj-core', version: '3.22.0'
}

ext['gradle.publish.key'] = System.getenv('GRADLE_PLUGIN_PORTAL_KEY')
ext['gradle.publish.secret'] = System.getenv('GRADLE_PLUGIN_PORTAL_SECRET')

pluginBundle {
    website = 'https://github.com/hmcts/rse-cft-lib'
    vcsUrl = 'https://github.com/hmcts/rse-cft-lib'
    tags = ['hmcts']
}

gradlePlugin {
    // Define the plugin
    plugins {
        greeting {
            id = 'com.github.hmcts.rse-cft-lib'
            displayName = 'HMCTS CFT development SDK'
            description = 'SDK for local development and testing'
            implementationClass = 'uk.gov.hmcts.rse.CftLibPlugin'
        }
    }
}

compileJava {
    options.compilerArgs += ["-Werror"]
}
